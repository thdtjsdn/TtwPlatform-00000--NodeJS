//----------------------------------------------------------------------------------------------------;

//	DEFINE - FUNCTION;

//----------------------------------------------------------------------------------------------------;

//----------------------------------------------------------------------------------------------------;

//	DEFINE;

//----------------------------------------------------------------------------------------------------;

//----------------------------------------------------------------------------------------------------;

//	DATABASE;

//----------------------------------------------------------------------------------------------------;

var _db$log_uri_SCODE = db.getSiblingDB( "log_uri_SCODE" );

//----------------------------------------------------------------------------------------------------;

//	COLLECTION;

//----------------------------------------------------------------------------------------------------;

/*///001 - 로그서버 사용가능한 시스템 강제 지정;
var _cols = {
	  SYS0010 : _db$log_uri_SCODE.SYS0010//B2LiNK-SessionServer-Dev;
	, SYS0011 : _db$log_uri_SCODE.SYS0011//B2LiNK-LogServer-Dev;
	, SYS0015 : _db$log_uri_SCODE.SYS0015//Development-Components-UI;
	, SYS0020 : _db$log_uri_SCODE.SYS0020//asdasd;
	, SYS0030 : _db$log_uri_SCODE.SYS0030//asdasd;
	, SYS0035 : _db$log_uri_SCODE.SYS0035//asdasd;
	, SYS0040 : _db$log_uri_SCODE.SYS0040//asdasd;
	, SYS0050 : _db$log_uri_SCODE.SYS0050//asdasd;
	, SYS0060 : _db$log_uri_SCODE.SYS0060//asdasd;
	, SYS0070 : _db$log_uri_SCODE.SYS0070//asdasd;
	, SYS0080 : _db$log_uri_SCODE.SYS0080//asdasd;
	, SYS0090 : _db$log_uri_SCODE.SYS0090//asdasd;
	, SYS0100 : _db$log_uri_SCODE.SYS0100//asdasd;
	, SYS0110 : _db$log_uri_SCODE.SYS0110//asdasd;
	, SYS0120 : _db$log_uri_SCODE.SYS0120//asdasd;
	, SYS0130 : _db$log_uri_SCODE.SYS0130//asdasd;
};
/*/
var _cols = {};
//*/

//----------------------------------------------------------------------------------------------------;

//	DOCUMENT;

//----------------------------------------------------------------------------------------------------;

//----------------------------------------------------------------------------------------------------;

//	PARAMETER;

//----------------------------------------------------------------------------------------------------;

//----------;
//Parameter Object - find or findOne에서 사용;
var p0 = { _id : -1 };
var p1 = { mid : null };
var p2 = { sid : null };
//----------;

//--------------------------------------------------[ S ] - 치환 문자열;
var d = <!=data=!>;
/*/
if( !d.SCODE )
{
	//SCODE가 없는 라우터 호출시 데이터는 쌓지 않고 그냥 정상 처리함;
	return 1;
}
//*/

d.date = new Date();
d.port = NumberInt( d.port );
//--------------------------------------------------[ E ] - 치환 문자열;

//*///002 - 로그서버 사용가능한 시스템 자율지정;
_cols[ d.SCODE ] = _db$log_uri_SCODE.getCollection( d.SCODE );
//*/

//----------------------------------------------------------------------------------------------------[ S ] - VALIDATION;

var _col = _cols[ d.SCODE ];

//이 쿼리 상단의 SCODE 기반의 콜렉션 Reference가 없을시;
if( !_col )
{
	return 0;
}

//----------------------------------------------------------------------------------------------------[ E ] - VALIDATION;

return _col.insertOne( d );
