var _path_query="../../../TtwPlatform-00000--NodeJS/js-MongoDB/router_internal/_mongodb/schema/createSchemaFromDBData__Basic_Collection",_query,_tjs,_tjson,_objToSchemaJSON=function(e,l){var t;for(var a in e)t=e[a],l[a]={description:""},t.hasOwnProperty("length")?(l[a].type="array",l[a].property={},_objToSchemaJSON(l[a].property,l[a])):"object"==typeof t?t.hasOwnProperty("_bsontype")?l[a].type=t._bsontype:(l[a].type="object",l[a].property={},_objToSchemaJSON(t,l[a].property)):l[a].type=typeof t,l[a].exampleValue=t};(function(e,l){if(!global.b2link.ip.adminCheckAvailable__http$ClientRequest(e,l))return void global.b2link.response.send_404__adminCheckAvailable__http$ClientRequest(e,l);var t=global.b2link.url.getQueryFromURL(e.url);global.b2link.response.setHeaders__b2ker(l),_query=_query||global.b2link.fs.getDBJS(_path_query+".dbjs"),_tjs=_tjs||global.b2link.fs.getFile_UTF8(_path_query+".tjs"),_tjson=_tjson||global.b2link.fs.getFile_UTF8(_path_query+".tjson");var a=_query.replace("<!=data=!>",t.data);global.b2link.fs.writeQuery(_path_query+".query",a),global.server.req_DB(e,l,{db:"admin",q:a},function(a,r){if(a)return void global.b2link.response.send_200_JSON(e,l,a);var o=global.b2link.STATIC.CONFIG.URL.SCODE,n=(global.b2link.fs.writeFile_UTF8,SUtilFsWriteStream.createDirectory__BeforCheck),_="../../../Export-MongoDB/",s=JSON.parse(t.data),i=_+"Schema-"+o,b=i+"/database",p=i+"/database-insert",c=b+"/_schema_template",u=p+"/_schema_template",m=c+"/"+s.nm_db,g=u+"/"+s.nm_db,y=c+"/"+s.nm_col+".tjson",d=c+"/"+s.nm_col+".tjs";n(_),n(i),n(b),n(p),n(c),n(u),n(m),n(g),global.uncompressSource||global.b2link.uncompressSource.install();var S,h=global.uncompressCSSJSHTML.js_source,j={};_objToSchemaJSON(r,j),S=JSON.stringify(j);var k=h(unescape(_tjson.replace("<!=document=!>",S))).replace(/\t\t\/\//gi,"	//");global.b2link.fs.writeFile_UTF8(y,k);var f=h(unescape(_tjs.replace("<!=document=!>",S).replace("<!=nm_col=!>",s.nm_col).replace("<!=nm_db=!>",s.nm_db))).replace(/\t\t\/\//gi,"	//");global.b2link.fs.writeFile_UTF8(d,f),global.b2link.response.send_200_String(e,l,k+"\n\n\n\n\n"+f)})});